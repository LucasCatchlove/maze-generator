function setup(){createCanvas(rows*side,cols*side),frameRate(40);for(let e=0;e<rows;e++)for(let i=0;i<cols;i++)grid.push(new Cell(e,i));starting_i=floor(random(0,floor(rows/3))),starting_j=floor(random(0,floor(cols/3))),ending_i=floor(random(floor(rows/3),rows)),ending_j=floor(random(floor(cols/3),cols)),current=grid[index(starting_i,starting_j)],current.visited=!0,playPauseBtn=createButton("pause"),playPauseBtn.id("pp-btn"),ppbtn=document.getElementById("pp-btn"),playPauseBtn.position(0,0),playPauseBtn.mousePressed(pause),stepBtn=createButton("step"),stepBtn.id("s-btn"),sBtn=document.getElementById("s-btn"),stepBtn.position(60,0),stepBtn.mousePressed(step),solveBtn=createButton("solve"),solveBtn.id("slv-btn"),slvBtn=document.getElementById("slv-btn"),slvBtn.disabled=!0,solveBtn.position(120,0),solveBtn.mousePressed(solve)}function pause(){noLoop(),ppbtn.innerHTML="play",playPauseBtn.mousePressed(play)}function play(){loop(),ppbtn.innerHTML="pause",playPauseBtn.mousePressed(pause)}function step(){ppbtn.innerHTML="play",playPauseBtn.mousePressed(play),noLoop(),draw()}function solve(){mazeSolved&&(starting_i=floor(random(0,floor(rows/1.25))),starting_j=floor(random(0,floor(cols/1.5))),ending_i=floor(random(floor(rows/4),rows)),ending_j=floor(random(floor(cols/4),cols)),ppbtn.disabled=!1,sBtn.disabled=!1),beginSolving=!0,mazeSolved=!1,grid.forEach(e=>{e.visited=!1,e.solnMember=!1}),current=grid[index(starting_i,starting_j)],current.visited=!0,current.solnMember=!0,mazeSolved=!1,slvBtn.innerHTML="solve again!",ppbtn.innerHTML="pause",loop()}function draw(){mazeGenerated?DFS():recursiveBacktracker()}function recursiveBacktracker(){grid.forEach(e=>e.show());let e=current.checkAdjacentCells();e?(e.visited=!0,cells.push(current),removeWalls(current,e),current=e):cells.length>0?current=cells.pop():(mazeGenerated=!0,grid.forEach(e=>e.visited=!1),current=grid[index(starting_i,starting_j)],current.visited=!0,current.solnMember=!0,slvBtn.disabled=!1,grid.forEach(e=>e.show()))}function DFS(){if(!mazeSolved&&beginSolving){grid.forEach(e=>e.show());let e=current.findPassage();current.i==ending_i&&current.j==ending_j?(noLoop(),mazeSolved=!0,ppbtn.disabled=!0,sBtn.disabled=!0,grid.forEach(e=>e.show())):e?(e.visited=!0,e.solnMember=!0,cells.push(current),current=e):cells.length>0&&(current.solnMember=!1,current=cells.pop())}}function Cell(e,i){this.i=e,this.j=i,this.visited=!1,this.solnMember=!1,this.walls=[!0,!0,!0,!0],this.show=function(){mazeGenerated?this.solnMember?(noStroke(),mazeSolved?fill("#1e88e5"):fill("#03a9f4"),ellipse(side/2+e*side,side/2+i*side,side/3.5,side/3.5)):(noStroke(),fill(255),rect(e*side,i*side,side,side)):(noStroke(),fill(255),rect(e*side,i*side,side,side),current.i==this.i&&current.j==this.j&&current!=grid[0]&&(fill(color("#ff7f7f")),ellipse(side/2+e*side,side/2+i*side,side/1.75,side/1.75))),(e==starting_i&&i==starting_j||e==ending_i&&i==ending_j)&&mazeGenerated&&(mazeSolved?(noStroke(),fill("#1e88e5")):fill("#1e88e5"),ellipse(side/2+e*side,side/2+i*side,side/1.75,side/1.75)),stroke(150),(this.walls[0]||grid[index(this.i-1,this.j)].walls[1])&&0!=this.i&&(line(e*side,i*side,e*side,(i+1)*side),line(e*side,i*side,e*side,(i+1)*side)),(this.walls[1]||grid[index(this.i+1,this.j)].walls[0])&&this.i!=rows-1&&(line((e+1)*side,i*side,(e+1)*side,(i+1)*side),line((e+1)*side,i*side,(e+1)*side,(i+1)*side)),(this.walls[2]||grid[index(this.i,this.j+1)].walls[3])&&this.j!=cols-1&&(line(e*side,(i+1)*side,(e+1)*side,(i+1)*side),line(e*side,(i+1)*side,(e+1)*side,(i+1)*side)),(this.walls[3]||grid[index(this.i,this.j-1)].walls[2])&&0!=this.j&&(line(e*side,i*side,(e+1)*side,i*side),line(e*side,i*side,(e+1)*side,i*side))},this.checkAdjacentCells=function(){let s=[],n=grid[index(e-1,i)],t=grid[index(e+1,i)],l=grid[index(e,i+1)],r=grid[index(e,i-1)];if(n&&!n.visited&&s.push(n),t&&!t.visited&&s.push(t),l&&!l.visited&&s.push(l),r&&!r.visited&&s.push(r),s.length>0){let e=floor(random(0,s.length));return s[e]}return null},this.findPassage=function(){let s=grid[index(e-1,i)],n=grid[index(e+1,i)],t=grid[index(e,i+1)],l=grid[index(e,i-1)];return!s||s.visited||this.walls[0]?!n||n.visited||this.walls[1]?!t||t.visited||this.walls[2]?!l||l.visited||this.walls[3]?null:l:t:n:s}}function index(e,i){return e<0||i<0||e>rows-1||i>cols-1?-1:e*rows+i}function removeWalls(e,i){i.i>e.i?(i.walls[0]=!1,e.walls[1]=!1):i.i<e.i?(i.walls[1]=!1,e.walls[0]=!1):i.j>e.j?(i.walls[3]=!1,e.walls[2]=!1):(i.walls[2]=!1,e.walls[3]=!1)}let current,starting_i,starting_j,ending_i,ending_j,grid=[],cells=[],rows=28,cols=28,side=25,mazeGenerated=!1,mazeSolved=!1,beginSolving=!1;